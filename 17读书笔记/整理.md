## 从输入URL到展示
* 浏览器内输入URL，浏览器进程的UI线程接收到输入，识别是搜索还是URL，URL则移交给网络线程处理
* 网络线程处理URL（此处有缓存或跨域）
  * DNS解析
  * TCP连接（3次握手）
  * SSL/TSL连接（4次握手）
  * 发送请求
  * 如果应用了缓存，强缓存直接从本地拿资源，协商缓存先询问服务端是否过期再决定从本地拿资源还是从服务端拿资源
  * 响应请求
  * TCP断开连接（4次挥手）/保持连接等待复用（keep-alive）/保持连接进行多路复用（HTTP2）
* 网络线程下载好HTML文档，通过浏览器进程移交给渲染进程
* 渲染进程的主线程开始解析HTML文档
  * 预加载扫描器扫描HTML文档，检索可下载的资源，移交网络线程处理
  * 解析HTML形成DOM树，解析CSS形成CSSOM树，两则合并成Render树
  * 执行JS文件，会阻塞DOM树的解析，JS可以操作DOM树或者CSSOM树，从而重新更新Render树
  * 所有内容解析完成，通过最终的Render树进行渲染，显示到屏幕上
* 如何将层叠关系渲染到屏幕上
  * DOM节点对应一个渲染对象（Render Obj），该渲染对象包括DOM的布局信息
  * 如果节点在同一个坐标空间系中，则形成一个渲染层（Render Layer Obj），渲染层确定了层叠关系
  * 渲染对象或者渲染层，可能被提升为合成层（Graphics Layer Obj），合成层直接在GPU上操作，并且操作不会影响其它图层，性能更好。但是需要防止合成层的隐式提升与层爆炸，导致GPU性能严重下降
  * 主线程将合成层提交个合成线程进行处理，然后合成线程将图层提交给光栅线程进行光栅化并合成最终图像，显示在屏幕上

  ## 图片
  * [一帧](https://user-gold-cdn.xitu.io/2017/5/2/5cd4a72de4568b7da544a32870e9aa5b?imageslim)
